version: 1
backend:
  phases:
    build:
      commands:
        - cd webApp
        - pip install -r requirements.txt
  start:
    commands:
      # Start your Flask backend with Gunicorn on port 8080
      - cd webApp
      - gunicorn --bind 0.0.0.0:8080 backend:app

frontend:
  phases:
    build:
      commands: []
  artifacts:
    baseDirectory: webApp
    files:
      - '**/*'
  cache:
    paths: []

# ðŸ‘‡ Rewrites and redirects section (important!)
rewrites:
  # Forward all /api requests to your backend service
  - source: /api/<*>
    target: http://localhost:8080/api/<*>
    status: 200

  # Default SPA rewrite for React/Vue/etc
  - source: /<*>
    target: /index.html
    status: 200
